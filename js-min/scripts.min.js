function initTable(){var e="SELECT id_pedido, nome, marca, data_de_compra, quantidade, preco FROM materiais AS m JOIN pedidos AS p ON m.id = p.id ORDER BY id_pedido ASC";if(mysqlQuery(e,function(e){var a=JSON.parse(e),t=document.getElementById("pedidos");a.forEach(function(e){var a="<tr><td>"+e.id_pedido+"</td><td>"+e.nome+"</td><td>"+e.marca+"</td><td>"+e.data_de_compra+"</td><td>"+e.quantidade+"</td><td>"+e.preco+"</td></tr>";t.innerHTML+=a})}),""===$(".j_insumos").val())return!1;$(".j_enviar").click(function(){var e=$(".j_insumos").val(),a=$(".j_desc").val(),t=$(".j_quant").val(),r=$(".j_preco").val(),o=document.getElementById("insumos"),i="<tr><td>"+e+"</td><td>"+a+"</td><td>"+t+"</td><td>"+r+"</td></tr>";o.innerHTML+=i});var e="SELECT m.marca, i.descricao, i.quantidade, i.preco FROM materiais As m JOIN insumos As i ON m.id = i.id_material WHERE m.marca = 'Epson' OR m.marca = 'HP'";mysqlQuery(e,function(e){var a=JSON.parse(e),t=document.getElementById("insumos");a.forEach(function(e){var a="<tr><td>"+e.marca+"</td><td>"+e.descricao+"</td><td>"+e.quantidade+"</td><td>"+e.preco+"</td></tr>";t.innerHTML+=a})})}function pesqCodigo(){if(""===$(".codigo").val())return $(".register label").hide(),$(".j_entrega").fadeOut(1e3),alert("O Número do Pedido não pode ser vazio, não pode ser texto e nem ter um valor igual a 0 !!"),$("#form").submit($("input").val("")),!1;var e=$(".codigo").val(),a="SELECT p.id_solicitante, s.nome, s.telefone, s.cpf, s.cep, s.rua, s.bairro, s.cidade, s.estado FROM pedidos As p JOIN solicitantes As s ON p.id_solicitante = s.id WHERE p.id_solicitante ="+e;mysqlQuery(a,function(e){var a=JSON.parse(e);""==a&&($(".register label").hide(),$(".j_entrega").fadeOut(1e3),alert("O número de pedido informado não existe em nossa base de dados !!"),$("#form").submit($("input").val(""))),a.forEach(function(e){$(".nome").val(e.nome),$(".telefone").val(e.telefone),$(".cpf").val(e.cpf),$(".cep").val(e.cep),$(".endereco").val(e.rua),$(".complemento").val(e.bairro),$(".cidade").val(e.cidade),$(".estado").val(e.estado),$(".register .j_cep").html(e.cep),$(".register .j_end").html(e.rua),$(".register .j_comp").html(e.bairro),$(".register .j_cid").html(e.cidade),$(".register .j_est").html(e.estado)})});var t="SELECT ROUND(((m.preco * m.quantidade) + (i.preco * i.quantidade))) As total FROM materiais As m JOIN insumos As i ON m.id = i.id_material WHERE m.id_pedido ="+e;mysqlQuery(t,function(e){var a=JSON.parse(e);a.forEach(function(e){$(".register .j_total").html("R$ "+e.total)})})}$(function(){$(".main_header a").click(function(){var e=$("."+$(this).attr("href").replace("#","")).position().top;return $("html, body").animate({scrollTop:e-$(".main_header").outerHeight()},1e3),!1}),$(window).scroll(function(){$(this).scrollTop()>$(".main_header").outerHeight()+240?($("body").css("padding-top",$(".main_header").outerHeight()),$(".main_header").addClass("main_header_fixed")):($("body").css("padding-top","0"),$(".main_header").removeClass("main_header_fixed"))}),$(".j_env").click(function(){if(confirm("Deseja realmente enviar os pedidos?")){if(confirm("Deseja incluir um transporte especial?"))return alert("Solicitar cotações de transportadoras"),alert("Atribuir transportadora e prepara o trabalho"),alert("Adicionar papelada e mover o pacote para escolher a áera"),$("html, body").animate({scrollTop:1760},1e3),$(".register").fadeIn(1700),!0;confirm("Deseja incluir um seguro extra?"),prompt("Preencher com etiqueta postal"),alert("Adicionar papelada e mover o pacote para escolher a áera"),$("html, body").animate({scrollTop:1760},1e3),$(".register").fadeIn(1700)}else $("html, body").animate({scrollTop:0},1e3);return!1}),$(".j_open").click(function(){$(this).toggleClass("closeform"),$("."+$(this).attr("rel")).slideToggle(),$("#form").submit($("input").val("")),$(".register label").hide(),$(".j_entrega").fadeOut(500),$(".j_formsubmit").find('input[name="action"]').val("create")}),$(".j_formsubmit").submit(function(){var e=$(this),a=$(this).serialize();return $.ajax({url:"ajax/ajax.php",data:a,type:"POST",dataType:"json",beforeSend:function(){e.find(".form_load").fadeIn(1e3)},success:function(){e.find(".form_load").fadeOut(1e3),$(".register label").fadeIn(1e3),$(".j_entrega").fadeIn(1200)}}),!1})}),jQuery(".telefone").mask("(99) 99999-9999"),jQuery(".cpf").mask("999.999.999-99"),jQuery(".Data_compra").mask("99/99/9999"),jQuery(".cep").mask("99999-999"),$(function(){$("#formPedido").submit(function(e){return e.preventDefault(),""===$(".j_marca").val()?(alert("O campo Marca não pode ser vazio"),!1):""===$(".j_desc").val()?(alert("O campo de descrição não pode ser vazio ou números, apenas texto !!"),$(".j_enviar").attr("disabled","disabled").removeClass("btn-green"),!1):""===$(".j_quant").val()?(alert("O campo de quantidade não pode ser vazio"),$(".j_enviar").attr("disabled","disabled").removeClass("btn-green"),!1):""===$(".j_preco").val()?(alert("O campo de preço não pode ser vazio"),$(".j_enviar").attr("disabled","disabled").removeClass("btn-green"),!1):void(""!=$(".j_marca").val()&&""!=$(".j_desc").val()&&""!=$(".j_quant").val()&&""!=$(".j_preco").val()?$(".j_enviar").removeAttr("disabled","disabled").addClass("btn-green"):$(".j_enviar").attr("disabled","disabled").removeClass("btn-green"))}),$(".j_limpar").click(function(){$(".j_enviar").attr("disabled","disabled").removeClass("btn-green")})}),$(".j_enviar").click(function(){$(this).attr("disabled","disabled").removeClass("btn-green")}),$(function(){$(".input-search").keyup(function(){var e=$(this).attr("alt");""!=$(this).val()?($("."+e+" tbody > tr").hide(),$("."+e+" td:contains-ci('"+$(this).val()+"')").parent("tr").show()):$("."+e+" tbody > tr").show()})}),$.extend($.expr[":"],{"contains-ci":function(e,a,t){return(e.textContent||e.innerText||$(e).text()||"").toLowerCase().indexOf((t[3]||"").toLowerCase())>=0}}),window.onload=initTable,$(document).ready(function(){function e(){$(".endereco").val(""),$(".complemento").val(""),$(".cidade").val(""),$(".estado").val("")}$(".cep").blur(function(){var a=$(this).val().replace(/\D/g,"");if(""!=a){var t=/^[0-9]{8}$/;t.test(a)?($(".endereco").val(""),$(".complemento").val(""),$(".cidade").val(""),$(".estado").val(""),$.getJSON("//viacep.com.br/ws/"+a+"/json/?callback=?",function(a){"erro"in a?(e(),alert("CEP não encontrado.")):($(".endereco").val(a.logradouro),$(".complemento").val(a.bairro),$(".cidade").val(a.localidade),$(".estado").val(a.uf))})):(e(),alert("Formato de CEP inválido."))}else e()})}),$(document).ready(function(){var e=document.getElementsByClassName("line-chart"),a=document.getElementsByClassName("line-chartb"),t="SELECT id_solicitante As solicitante, COUNT(*) AS pedidos FROM pedidos GROUP BY id_solicitante",r="SELECT COUNT(id_solicitante) AS res FROM pedidos GROUP BY data_de_compra";mysqlQuery(r,function(e){var t=JSON.parse(e),r=[t[0].res,t[1].res,t[2].res,t[3].res,t[4].res,t[5]=0,t[6]=0];new Chart(a,{type:"line",data:{labels:["Seg","Ter","Qua","Qui","Sex","Sab","Dom"],datasets:[{label:"Gráficos com Chart.js - Pedidos Por Solicitante",data:r,borderWidth:6,borderColor:"rgba(58, 83, 155, 0.85)",backgroundColor:"rgba(75, 119, 190, 0.5)"}]}})}),mysqlQuery(t,function(a){var t=JSON.parse(a),r=[t[0].pedidos,t[1].pedidos,t[2].pedidos,t[3].pedidos,t[4]=0,t[5]=0,t[6]=0],o=["Cod:"+t[0].solicitante,"Cod:"+t[1].solicitante,"Cod:"+t[2].solicitante,"Cod:"+t[3].solicitante,"Cod:"+t[4].solicitante];new Chart(e,{type:"line",data:{labels:o,datasets:[{label:"Gráficos com Chart.js - N° De Pedidos Por Dia",data:r,borderWidth:6,borderColor:"rgba(27, 188, 155, 0.85)",backgroundColor:"rgba(134, 226, 213, 0.5)"}]}})})});